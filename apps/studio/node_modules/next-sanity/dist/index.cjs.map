{"version":3,"file":"index.cjs","sources":["../src/client.ts"],"sourcesContent":["import {\n  createClient as createPreviewKitClient,\n  type PreviewKitClientConfig,\n} from '@sanity/preview-kit/client'\n\nexport type * from '@sanity/preview-kit/client'\n\n/** @public */\nexport interface ClientConfig\n  extends Omit<PreviewKitClientConfig, 'studioUrl' | 'encodeSourceMap'> {\n  /**\n   * Where the Studio is hosted.\n   * If it's embedded in the app, use the base path for example `/studio`.\n   * Otherwise provide the full URL to where the Studio is hosted, for example: `https://blog.sanity.studio`.\n   * @defaultValue process.env.NEXT_PUBLIC_SANITY_STUDIO_URL\n   * @alpha\n   */\n  studioUrl?: PreviewKitClientConfig['studioUrl']\n  /**\n   * If there's no `studioUrl` then the default value is `none` and the normal `@sanity/client` will be used. If `studioUrl` is set, then it's `auto` by default.\n   * @defaultValue process.env.MEXT_PUBLIC_SANITY_SOURCE_MAP || studioUrl ? 'auto' : 'none'\n   * @alpha\n   */\n  encodeSourceMap?: PreviewKitClientConfig['encodeSourceMap']\n}\n\n/** @public */\nexport type SanityClient = ReturnType<typeof createPreviewKitClient>\n\n/**\n * @public\n */\nexport function createClient(config: ClientConfig): SanityClient {\n  let {\n    // eslint-disable-next-line prefer-const, no-process-env\n    studioUrl = process.env.NEXT_PUBLIC_SANITY_STUDIO_URL! as PreviewKitClientConfig['studioUrl'],\n    encodeSourceMap = (studioUrl\n      ? 'auto'\n      : false) satisfies PreviewKitClientConfig['encodeSourceMap'],\n  } = config\n  // eslint-disable-next-line no-process-env\n  if (encodeSourceMap === 'auto' && process.env.NEXT_PUBLIC_VERCEL_ENV === 'preview') {\n    encodeSourceMap = true\n  }\n  return createPreviewKitClient({...config, studioUrl, encodeSourceMap})\n}\n"],"names":["createClient","config","studioUrl","process","env","NEXT_PUBLIC_SANITY_STUDIO_URL","encodeSourceMap","NEXT_PUBLIC_VERCEL_ENV","createPreviewKitClient"],"mappings":";;;;;;;;;;;;;AAgCO,SAASA,aAAaC,MAAoC,EAAA;EAC3D,IAAA;IAAA;IAEFC,SAAA,GAAYC,QAAQC,GAAI,CAAAC,6BAAA;IACxBC,eAAA,GAAmBJ,YACf,MACA,GAAA;EACF,CAAA,GAAAD,MAAA;EAEJ,IAAIK,eAAoB,KAAA,MAAA,IAAUH,OAAQ,CAAAC,GAAA,CAAIG,2BAA2B,SAAW,EAAA;IAChED,eAAA,GAAA,IAAA;EACpB;EACA,OAAOE,MAAAA,CAAAA,aAAuB;IAAC,GAAGP,MAAQ;IAAAC,SAAA;IAAWI;EAAgB,CAAA,CAAA;AACvE;;;;;;;"}