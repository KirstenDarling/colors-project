{"version":3,"file":"GeopointSelect.js","names":["fallbackLatLng","lat","lng","GeopointSelect","React","PureComponent","createRef","place","geometry","setValue","location","event","latLng","getCenter","props","value","defaultLocation","point","geoPoint","onChange","render","api","defaultZoom","handleMapClick","map","handlePlaceChanged","handleMarkerDragEnd","undefined"],"sources":["../../src/input/GeopointSelect.tsx"],"sourcesContent":["import React from 'react'\nimport {SearchInput} from '../map/SearchInput'\nimport {GoogleMap} from '../map/Map'\nimport {Marker} from '../map/Marker'\nimport {LatLng, Geopoint} from '../types'\n\nconst fallbackLatLng: LatLng = {lat: 40.7058254, lng: -74.1180863}\n\ninterface SelectProps {\n  api: typeof window.google.maps\n  value?: Geopoint\n  onChange?: (latLng: google.maps.LatLng) => void\n  defaultLocation?: LatLng\n  defaultZoom?: number\n}\n\nexport class GeopointSelect extends React.PureComponent<SelectProps> {\n  static defaultProps = {\n    defaultZoom: 8,\n    defaultLocation: {lng: 10.74609, lat: 59.91273},\n  }\n\n  mapRef = React.createRef<HTMLDivElement>()\n\n  getCenter() {\n    const {value = {}, defaultLocation = {}} = this.props\n    const point: LatLng = {...fallbackLatLng, ...defaultLocation, ...value}\n    return point\n  }\n\n  handlePlaceChanged = (place: google.maps.places.PlaceResult) => {\n    if (!place.geometry) {\n      return\n    }\n\n    this.setValue(place.geometry.location)\n  }\n\n  handleMarkerDragEnd = (event: google.maps.MapMouseEvent) => {\n    this.setValue(event.latLng)\n  }\n\n  handleMapClick = (event: google.maps.MapMouseEvent) => {\n    this.setValue(event.latLng)\n  }\n\n  setValue(geoPoint: google.maps.LatLng) {\n    if (this.props.onChange) {\n      this.props.onChange(geoPoint)\n    }\n  }\n\n  render() {\n    const {api, defaultZoom, value, onChange} = this.props\n    return (\n      <GoogleMap\n        api={api}\n        location={this.getCenter()}\n        onClick={this.handleMapClick}\n        defaultZoom={defaultZoom}\n      >\n        {(map) => (\n          <>\n            <SearchInput api={api} map={map} onChange={this.handlePlaceChanged} />\n            {value && (\n              <Marker\n                api={api}\n                map={map}\n                position={value}\n                onMove={onChange ? this.handleMarkerDragEnd : undefined}\n              />\n            )}\n          </>\n        )}\n      </GoogleMap>\n    )\n  }\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAAoC;AAAA;AAAA;AAAA;AAGpC,IAAMA,cAAsB,GAAG;EAACC,GAAG,EAAE,UAAU;EAAEC,GAAG,EAAE,CAAC;AAAU,CAAC;AAU3D,MAAMC,cAAc,SAASC,cAAK,CAACC,aAAa,CAAc;EAAA;IAAA;IAAA,6CAM1DD,cAAK,CAACE,SAAS,EAAkB;IAAA,4CAQpBC,KAAqC,IAAK;MAC9D,IAAI,CAACA,KAAK,CAACC,QAAQ,EAAE;QACnB;MACF;MAEA,IAAI,CAACC,QAAQ,CAACF,KAAK,CAACC,QAAQ,CAACE,QAAQ,CAAC;IACxC,CAAC;IAAA,6CAEsBC,KAAgC,IAAK;MAC1D,IAAI,CAACF,QAAQ,CAACE,KAAK,CAACC,MAAM,CAAC;IAC7B,CAAC;IAAA,wCAEiBD,KAAgC,IAAK;MACrD,IAAI,CAACF,QAAQ,CAACE,KAAK,CAACC,MAAM,CAAC;IAC7B,CAAC;EAAA;EApBDC,SAAS,GAAG;IACV,kBAA2C,IAAI,CAACC,KAAK;MAAA,gCAA9CC,KAAK;MAALA,KAAK,kCAAG,CAAC,CAAC;MAAA,oCAAEC,eAAe;MAAfA,eAAe,sCAAG,CAAC,CAAC;IACvC,IAAMC,KAAa,iDAAOjB,cAAc,GAAKgB,eAAe,GAAKD,KAAK,CAAC;IACvE,OAAOE,KAAK;EACd;EAkBAR,QAAQ,CAACS,QAA4B,EAAE;IACrC,IAAI,IAAI,CAACJ,KAAK,CAACK,QAAQ,EAAE;MACvB,IAAI,CAACL,KAAK,CAACK,QAAQ,CAACD,QAAQ,CAAC;IAC/B;EACF;EAEAE,MAAM,GAAG;IACP,mBAA4C,IAAI,CAACN,KAAK;MAA/CO,GAAG,gBAAHA,GAAG;MAAEC,WAAW,gBAAXA,WAAW;MAAEP,KAAK,gBAALA,KAAK;MAAEI,QAAQ,gBAARA,QAAQ;IACxC,oBACE,6BAAC,cAAS;MACR,GAAG,EAAEE,GAAI;MACT,QAAQ,EAAE,IAAI,CAACR,SAAS,EAAG;MAC3B,OAAO,EAAE,IAAI,CAACU,cAAe;MAC7B,WAAW,EAAED;IAAY,GAEvBE,GAAG,iBACH,yEACE,6BAAC,wBAAW;MAAC,GAAG,EAAEH,GAAI;MAAC,GAAG,EAAEG,GAAI;MAAC,QAAQ,EAAE,IAAI,CAACC;IAAmB,EAAG,EACrEV,KAAK,iBACJ,6BAAC,cAAM;MACL,GAAG,EAAEM,GAAI;MACT,GAAG,EAAEG,GAAI;MACT,QAAQ,EAAET,KAAM;MAChB,MAAM,EAAEI,QAAQ,GAAG,IAAI,CAACO,mBAAmB,GAAGC;IAAU,EAE3D,CAEJ,CACS;EAEhB;AACF;AAAC;AAAA,gBA7DYxB,cAAc,kBACH;EACpBmB,WAAW,EAAE,CAAC;EACdN,eAAe,EAAE;IAACd,GAAG,EAAE,QAAQ;IAAED,GAAG,EAAE;EAAQ;AAChD,CAAC"}