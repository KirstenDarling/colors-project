{"version":3,"file":"GoogleMapsLoadProxy.js","names":["GoogleMapsLoadProxy","React","Component","constructor","props","state","loadState","sync","loadSubscription","loadGoogleMapsApi","subscribe","setState","componentWillUnmount","unsubscribe","render","error","children","api"],"sources":["../../src/loader/GoogleMapsLoadProxy.tsx"],"sourcesContent":["import React from 'react'\nimport {Subscription} from 'rxjs'\nimport {loadGoogleMapsApi, GoogleLoadState} from './loadGoogleMapsApi'\nimport {LoadError} from './LoadError'\n\ninterface LoadProps {\n  children: (api: typeof window.google.maps) => React.ReactElement\n}\n\nexport class GoogleMapsLoadProxy extends React.Component<LoadProps, GoogleLoadState> {\n  loadSubscription: Subscription | undefined\n\n  constructor(props: LoadProps) {\n    super(props)\n\n    this.state = {loadState: 'loading'}\n\n    let sync = true\n    this.loadSubscription = loadGoogleMapsApi().subscribe((loadState) => {\n      if (sync) {\n        this.state = loadState\n      } else {\n        this.setState(loadState)\n      }\n    })\n    sync = false\n  }\n\n  componentWillUnmount() {\n    if (this.loadSubscription) {\n      this.loadSubscription.unsubscribe()\n    }\n  }\n\n  render() {\n    switch (this.state.loadState) {\n      case 'loadError':\n        return <LoadError error={this.state.error} isAuthError={false} />\n      case 'authError':\n        return <LoadError isAuthError />\n      case 'loading':\n        return <div>Loading Google Maps API</div>\n      case 'loaded':\n        return this.props.children(this.state.api) || null\n      default:\n        return null\n    }\n  }\n}\n"],"mappings":";;;;;;AAAA;AAEA;AACA;AAAqC;AAAA;AAM9B,MAAMA,mBAAmB,SAASC,cAAK,CAACC,SAAS,CAA6B;EAGnFC,WAAW,CAACC,KAAgB,EAAE;IAC5B,KAAK,CAACA,KAAK,CAAC;IAAA;IAEZ,IAAI,CAACC,KAAK,GAAG;MAACC,SAAS,EAAE;IAAS,CAAC;IAEnC,IAAIC,IAAI,GAAG,IAAI;IACf,IAAI,CAACC,gBAAgB,GAAG,IAAAC,oCAAiB,GAAE,CAACC,SAAS,CAAEJ,SAAS,IAAK;MACnE,IAAIC,IAAI,EAAE;QACR,IAAI,CAACF,KAAK,GAAGC,SAAS;MACxB,CAAC,MAAM;QACL,IAAI,CAACK,QAAQ,CAACL,SAAS,CAAC;MAC1B;IACF,CAAC,CAAC;IACFC,IAAI,GAAG,KAAK;EACd;EAEAK,oBAAoB,GAAG;IACrB,IAAI,IAAI,CAACJ,gBAAgB,EAAE;MACzB,IAAI,CAACA,gBAAgB,CAACK,WAAW,EAAE;IACrC;EACF;EAEAC,MAAM,GAAG;IACP,QAAQ,IAAI,CAACT,KAAK,CAACC,SAAS;MAC1B,KAAK,WAAW;QACd,oBAAO,6BAAC,oBAAS;UAAC,KAAK,EAAE,IAAI,CAACD,KAAK,CAACU,KAAM;UAAC,WAAW,EAAE;QAAM,EAAG;MACnE,KAAK,WAAW;QACd,oBAAO,6BAAC,oBAAS;UAAC,WAAW;QAAA,EAAG;MAClC,KAAK,SAAS;QACZ,oBAAO,oEAAkC;MAC3C,KAAK,QAAQ;QACX,OAAO,IAAI,CAACX,KAAK,CAACY,QAAQ,CAAC,IAAI,CAACX,KAAK,CAACY,GAAG,CAAC,IAAI,IAAI;MACpD;QACE,OAAO,IAAI;IAAA;EAEjB;AACF;AAAC"}